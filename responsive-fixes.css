/* Comprehensive Responsive CSS for Li-Ho Learning Game */
/* Apply this CSS to make all game pages mobile and tablet friendly */

/* Core Responsive Foundation */
* {
  box-sizing: border-box !important;
}

html {
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  -moz-text-size-adjust: 100%;
  text-size-adjust: 100%;
  width: 100%;
  height: 100%;
}

body {
  width: 100% !important;
  height: 100% !important;
  margin: 0 !important;
  padding: 0 !important;
  overflow: hidden !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  max-width: 100vw !important;
  max-height: 100vh !important;
}

/* Background Optimization for All Game Types */
#gameContainer,
.app,
body {
  background-size: cover !important;
  background-position: center center !important;
  background-repeat: no-repeat !important;
  background-attachment: fixed !important;
  max-width: 100vw !important;
  max-height: 100vh !important;
  overflow: hidden !important;
}

/* Prevent game elements from overflowing */
#grid, .app {
  position: relative !important;
  width: 100% !important;
  height: 100% !important;
  overflow: hidden !important;
}

/* Ensure all positioned elements stay within bounds */
.card {
  max-width: 20vw !important;
  max-height: 20vh !important;
  box-sizing: border-box !important;
}

/* Canvas Responsive Behavior */
#gameCanvas, canvas {
  width: 100% !important;
  height: 100% !important;
  display: block !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  z-index: 1 !important;
}

/* Mobile Device Optimizations */
@media (max-width: 768px) {
  /* Touch-friendly interactive elements */
  .click-zone,
  .card,
  .object-svg,
  .action-button,
  button {
    min-width: 6vw !important;
    min-height: 6vh !important;
    touch-action: manipulation !important;
  }

  /* Mobile font scaling */
  body, * {
    font-size: clamp(12px, 3.5vw, 18px) !important;
  }

  /* Mobile background optimization */
  body, #gameContainer, .app {
    background-size: cover !important;
    background-attachment: scroll !important; /* Better for mobile */
    background-position: center center !important;
  }

  /* Mobile UI adjustments */
  .button-container {
    bottom: 1vh !important;
    gap: 3vw !important;
    max-width: 95vw !important;
  }

  .action-button img {
    width: clamp(120px, 12vw, 200px) !important;
  }

  /* Adjust game elements for mobile - better card sizing */
  .card {
    transform-origin: center center !important;
    min-width: 8vw !important;
    min-height: 8vh !important;
    max-width: 20vw !important;
    max-height: 20vh !important;
  }

  /* Ensure animal cards are visible and touchable */
  .card img {
    max-width: 100% !important;
    max-height: 100% !important;
    object-fit: contain !important;
  }

  /* Mobile specific game adjustments */
  #nextLevelBtn {
    font-size: clamp(12px, 3vw, 16px) !important;
    padding: 0.5em 0.8em !important;
  }

  /* Better spacing for mobile guess what games */
  .app {
    padding: 0 !important;
  }

  /* Mobile score positioning */
  #score {
    font-size: clamp(14px, 4vw, 20px) !important;
    padding: 0.5em 1em !important;
  }
}

/* Tablet Optimizations */
@media (min-width: 769px) and (max-width: 1024px) {
  body, * {
    font-size: clamp(14px, 2.5vw, 20px) !important;
  }

  .action-button img {
    width: clamp(180px, 14vw, 250px) !important;
  }
}

/* Small Mobile Phones */
@media (max-width: 480px) {
  .button-container {
    bottom: 0.5vh !important;
    gap: 2vw !important;
    padding: 0 1vw !important;
  }

  .action-button img {
    width: clamp(80px, 10vw, 150px) !important;
  }

  /* Smaller UI elements for tiny screens */
  #exitButton, #closeBtn {
    width: 1.8em !important;
    height: 1.8em !important;
    font-size: clamp(16px, 4vw, 24px) !important;
  }
}

/* Large Screens - Prevent oversizing */
@media (min-width: 1920px) {
  .action-button img {
    max-width: 300px !important;
  }

  body, * {
    max-font-size: 24px;
  }
}

/* Portrait vs Landscape Optimizations */
@media (orientation: portrait) {
  .button-container {
    flex-direction: row !important;
    flex-wrap: wrap !important;
    justify-content: space-around !important;
  }

  /* Better spacing for portrait */
  #gameContainer, .app, body {
    background-size: cover !important;
  }
}

@media (orientation: landscape) and (max-height: 600px) {
  /* Landscape mobile optimization */
  .button-container {
    bottom: 0.5vh !important;
    gap: 1vw !important;
  }

  .action-button img {
    width: clamp(60px, 8vw, 120px) !important;
  }

  .score-display, #score {
    top: 0.5vh !important;
    font-size: clamp(12px, 2.5vw, 18px) !important;
    padding: 0.4em 0.8em !important;
  }
}

/* High DPI Display Optimization */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  img, svg {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}

/* Universal UI Element Positioning */
#exitButton, #closeBtn, .close-btn {
  position: absolute !important;
  top: clamp(8px, 1.5vh, 25px) !important;
  right: clamp(8px, 1.5vw, 25px) !important;
  font-size: clamp(16px, 3.5vw, 28px) !important;
  z-index: 1000 !important;
  width: clamp(2em, 8vw, 2.5em) !important;
  height: clamp(2em, 8vw, 2.5em) !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

#soundBtn, .sound-btn {
  position: absolute !important;
  bottom: clamp(8px, 1.5vh, 25px) !important;
  left: clamp(8px, 1.5vw, 25px) !important;
  z-index: 1000 !important;
}

#soundBtn img {
  width: clamp(35px, 7vw, 55px) !important;
  height: clamp(35px, 7vw, 55px) !important;
}

.score-display, #score {
  position: absolute !important;
  top: clamp(8px, 1.5vh, 25px) !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  font-size: clamp(12px, 2.8vw, 20px) !important;
  z-index: 1000 !important;
  white-space: nowrap !important;
  padding: clamp(0.4em, 1.5vw, 0.8em) clamp(0.8em, 3vw, 1.5em) !important;
}

.next-button, #nextButton, #nextLevelBtn {
  position: absolute !important;
  top: clamp(8px, 1.5vh, 25px) !important;
  left: clamp(8px, 1.5vw, 25px) !important;
  font-size: clamp(12px, 2.5vw, 18px) !important;
  padding: clamp(0.5em, 1.5vw, 0.8em) clamp(0.8em, 2.5vw, 1.2em) !important;
  z-index: 1000 !important;
  white-space: nowrap !important;
}

/* Click Zone Enhancements */
.click-zone {
  position: absolute !important;
  cursor: pointer !important;
  z-index: 10 !important;
  transition: transform 0.2s ease !important;
}

.click-zone:hover {
  transform: scale(1.02) !important;
}

/* Game Card Improvements */
.card {
  position: absolute !important;
  cursor: pointer !important;
  transition: transform 0.2s ease !important;
  touch-action: manipulation !important;
}

.card:hover, .card:active {
  transform: scale(1.05) !important;
}

/* Object SVG Improvements */
.object-svg {
  position: absolute !important;
  cursor: pointer !important;
  transition: all 0.2s ease !important;
  touch-action: manipulation !important;
  max-width: 100% !important;
  height: auto !important;
}

.object-svg:hover, .object-svg:active {
  transform: scale(1.1) !important;
  filter: brightness(1.1) !important;
}

/* Prevent Unwanted Behaviors */
img, svg {
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  user-select: none !important;
  -webkit-user-drag: none !important;
  -khtml-user-drag: none !important;
  -moz-user-drag: none !important;
  -o-user-drag: none !important;
  user-drag: none !important;
}

/* Prevent zoom on double tap */
button, input, select, textarea, .click-zone, .card, .object-svg {
  touch-action: manipulation !important;
}

/* Smooth interactions */
* {
  scroll-behavior: smooth !important;
}

/* Fix for iOS Safari viewport issues */
@supports (-webkit-touch-callout: none) {
  body {
    height: -webkit-fill-available !important;
  }

  #gameContainer, .app {
    min-height: -webkit-fill-available !important;
  }
}

/* Ensure proper stacking context */
.highlight {
  z-index: 45 !important;
}

.checkmark-svg {
  z-index: 100 !important;
}

/* Button Container Responsive Layout */
.button-container {
  position: absolute !important;
  bottom: clamp(5px, 1vh, 15px) !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  display: flex !important;
  gap: clamp(8px, 2vw, 20px) !important;
  flex-wrap: wrap !important;
  justify-content: center !important;
  max-width: 95vw !important;
  z-index: 50 !important;
}

/* Action Button Responsive Behavior */
.action-button {
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  cursor: pointer !important;
  transition: transform 0.3s ease !important;
  position: relative !important;
  touch-action: manipulation !important;
}

.action-button:hover, .action-button:active {
  transform: scale(1.05) !important;
}

.action-button img {
  width: clamp(100px, 12vw, 250px) !important;
  height: auto !important;
  display: block !important;
}

/* Ensure silhouettes stay dark (black) */
.silhouette.sil img,
.card .silhouette.sil img {
  filter: brightness(0) saturate(100%) contrast(120%) !important;
}

/* Animal Shadow Effects - Only for revealed animals (with normal colors) */
.silhouette.revealed img,
.card .silhouette.revealed img,
.revealed .silhouette img {
  filter: brightness(1) saturate(1) contrast(1) drop-shadow(3px 3px 8px rgba(0,0,0,0.4)) !important;
}

/* Additional shadow for object SVGs in Hidden Object games when found */
.object-svg.found,
.object-svg:hover {
  filter: drop-shadow(2px 2px 6px rgba(0,0,0,0.3)) brightness(1.1) !important;
}